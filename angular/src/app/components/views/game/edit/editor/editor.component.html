<div class="container">
    <app-dynamicsidebar [items]="sidebarItems">
    </app-dynamicsidebar>

    <div class="container2">
        <div class="nav">
            <h4 class="small-heading">
                Edit Levels
            </h4>
            <div class="buttons-separator nav-separator dyn-anim-fadein-delayed"></div>
            <!-- Level Selector -->
            <div class="select-lvl-container dyn-anim-fadein-delayed">
                <select class="dyn-select" placeholder="Select a game type" (change)="didSelectLevel($event)">
                    <option value="-1">Select a level...</option>
                    <option 
                        *ngFor="let level of gameLevels" value="{{level._id}}"
                        [selected]="level._id == selectedLevel?._id">
                        {{level.name}}
                    </option>
                </select>
            </div>
            <!-- Scene, Animation, Logic tabs -->
            <ng-container *ngIf="selectedLevel != undefined">
                <div class="buttons-separator nav-separator dyn-anim-fadein-delayed"></div>
                <div class="editor-tabs dyn-anim-fadein-delayed">
                    <div class="editor-tab" 
                        [class.selected]="getSelectedTabIndex() == 0"
                        (click)="didSelectedEditorTab(0)">
                        <a [routerLink]="['/game/edit/editor/scene']" [queryParams]="editorQueryParams">
                            Scene
                        </a>
                    </div>
                    <div class="editor-tab-separator">
                        <img src="assets/game/graydot.png">
                    </div>
                    <div class="editor-tab" 
                        [class.selected]="getSelectedTabIndex() == 1"
                        (click)="didSelectedEditorTab(1)">
                        <a [routerLink]="['/game/edit/editor/animation']" [queryParams]="editorQueryParams">
                            Properties
                        </a>
                    </div>
                    <div class="editor-tab-separator">
                        <img src="assets/game/graydot.png">
                    </div>
                    <div class="editor-tab" 
                        [class.selected]="getSelectedTabIndex() == 2"
                        (click)="didSelectedEditorTab(2)">
                        <a [routerLink]="['/game/edit/editor/logic']" [queryParams]="editorQueryParams">
                            Logic
                        </a>
                    </div>
                </div>
            </ng-container>
            <div class="nav-stretch editor-nav-right">
                <app-userstatus></app-userstatus>
            </div>
        </div>
        <ng-container *ngIf="didLoadData">
            <ng-container *ngIf="selectedLevel != undefined">
                <div class="buttons dyn-anim-fadein-delayed">
                    <div 
                        class="dyn-btn clickable btn-save"
                        [class.dyn-btn-disabled]="isSaving"
                        (click)="saveGame()">
                        {{isSaving ? "" : "Save Game"}}
                        <mat-progress-spinner class="saving-progress"
                            *ngIf="isSaving" [diameter]="20" mode="indeterminate">
                        </mat-progress-spinner>
                    </div>
                    <div class="buttons-separator"></div>
                    <div class="dyn-btn clickable btn-play-game" (click)="playGamePressed()">
                        <img class="btn-play-image" src="/assets/game/whitecontroller.png"/>
                        <div class="btn-content">
                            <div class="btn-content-main">Play</div>
                            <!-- <div class="btn-content-sub">Win + N</div> -->
                        </div>
                    </div><div class="dyn-btn clickable btn-compile-game" (click)="playGamePressed()">
                        <img class="btn-play-image" src="/assets/game/whitecontroller.png"/>
                        <div class="btn-content">
                            <div class="btn-content-main">Compile</div>
                            <!-- <div class="btn-content-sub">Win + N</div> -->
                        </div>
                    </div>
                    <div class="dyn-btn clickable btn-compile-play">
                        <img class="btn-play-image" src="/assets/game/whitecontroller.png"/>
                        <div class="btn-content">
                            <div class="btn-content-main">Compile & Play</div>
                            <!-- <div class="btn-content-sub">Win + N</div> -->
                        </div>
                    </div>
                    <div class="buttons-separator"></div>
                    <div class="dyn-btn clickable" (click)="openHelpPressed()">Help</div>
                </div>
            </ng-container>
            <router-outlet></router-outlet>
        </ng-container>
    </div>

</div>